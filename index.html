<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>失智症視角：街道幻覺版</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; }
        /* 使用一張真實街道圖片作為背景 */
        #street-bg {
            position: fixed; width: 110vw; height: 110vh;
            background-image: url('https://picsum.photos/id/402/2000/1200');
            background-size: cover; background-position: center;
            filter: grayscale(0.4) blur(2px); transition: 0.5s;
            left: -5vw; top: -5vh;
        }
        #status { position: fixed; bottom: 100px; width: 100%; text-align: center; z-index: 2000; color: white; text-shadow: 2px 2px 4px black; }
        #recover-btn { 
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            padding: 15px 30px; background: #e74c3c; color: white; border: none;
            border-radius: 50px; font-size: 1.1rem; z-index: 3000;
        }
        .clear-vision { filter: none !important; transform: scale(1) rotate(0deg) !important; }
    </style>
</head>
<body>
    <div id="street-bg"></div>
    <div id="status">正在感應街道資訊...</div>
    <button id="recover-btn">點擊恢復清醒</button>

    <script>
        let isDementiaMode = true;
        const bg = document.getElementById('street-bg');

        navigator.geolocation.watchPosition((pos) => {
            if (isDementiaMode) {
                // 當你走動時，街道圖片會產生旋轉與縮放幻覺
                let rotate = (Math.random() - 0.5) * 10; 
                let scale = 1 + (Math.random() * 0.1);
                bg.style.transform = `rotate(${rotate}deg) scale(${scale})`;
                bg.style.filter = `grayscale(0.5) blur(${Math.random() * 4}px)`;
                document.getElementById('status').innerText = "這條路...我應該走過，但它一直在變...";
            } else {
                document.getElementById('status').innerText = "看清楚了，這只是一條平凡的路。";
            }
        }, null, { enableHighAccuracy: true });

        document.getElementById('recover-btn').addEventListener('click', function() {
            isDementiaMode = !isDementiaMode;
            if (!isDementiaMode) {
                bg.classList.add('clear-vision');
                this.innerText = "重新進入模擬";
                this.style.background = "#27ae60";
            } else {
                bg.classList.remove('clear-vision');
                this.innerText = "點擊恢復清醒";
                this.style.background = "#e74c3c";
            }
        });
    </script>
</body>
</html>
