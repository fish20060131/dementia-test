<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <title>感知模擬：視覺優化版</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; touch-action: none; -webkit-user-select: none; font-family: sans-serif; }
        #bg {
            position: fixed; width: 100vw; height: 100vh;
            background-image: url('433436.jpg'); background-position: center; background-size: cover;
            z-index: 1; filter: grayscale(0.5) blur(3px); transform: scale(0.9);
            transition: filter 3s, transform 3s; 
        }
        #vignette { position: fixed; width: 100%; height: 100%; top: 0; left: 0; background: radial-gradient(circle, transparent 15%, rgba(0,0,0,0.98) 100%); z-index: 10; pointer-events: none; }
        
        /* 狀態文字：加強清晰度 */
        #status { 
            position: fixed; top: 12%; width: 100%; text-align: center; 
            color: #fff; z-index: 20; letter-spacing: 3px; font-size: 1rem; 
            font-weight: bold; text-shadow: 0 0 10px rgba(0,0,0,0.9), 0 0 5px rgba(255,255,255,0.5); 
            pointer-events: none; 
        }
        
        /* 搖桿 */
        #joy-base { position: fixed; bottom: 12%; left: 10%; width: 80px; height: 80px; background: rgba(255,255,255,0.05); border-radius: 50%; z-index: 999; border: 1px solid rgba(255,255,255,0.3); }
        #joy-knob { position: absolute; width: 30px; height: 30px; background: #fff; border-radius: 50%; left: 25px; top: 25px; }
        
        /* 修改後的按鈕：變小、更精緻、不擋視線 */
        #btn { 
            position: fixed; bottom: 12%; right: 10%; 
            min-width: 100px; padding: 10px 15px; background: rgba(0,0,0,0.6); 
            color: #fff; border: 1.5px solid #fff; border-radius: 30px; 
            z-index: 1000; font-weight: bold; font-size: 0.85rem;
            box-shadow: 0 0 15px rgba(255,255,255,0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            white-space: nowrap;
        }

        /* 碎念文字：加強發光感 */
        .whisper { 
            position: fixed; color: #fff; z-index: 500; pointer-events: none; 
            animation: fadeUp 2.5s forwards; font-size: 1.2rem; font-weight: 900;
            text-shadow: 2px 2px 0px #000, 0 0 10px rgba(255,255,255,0.8); 
        }
        @keyframes fadeUp { 0% { opacity: 0; transform: scale(0.8); } 15% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: translateY(-60px); } }
    </style>
</head>
<body>
    <div id="bg"></div>
    <div id="vignette"></div>
    <div id="status">正在尋找歸途...</div>
    <div id="joy-base"><div id="joy-knob"></div></div>
    <button id="btn" onclick="next(event)">找回意識 (0/3)</button>

    <script>
        let stage = 1;
        let count = 0;
        let active = true;
        const texts1 = ["這是哪？", "我忘了...", "路好長...", "好吵...", "他們在看我嗎？"];
        const texts2 = ["這是我家嗎？", "怎麼打不開...", "門壞了嗎？", "鑰匙呢？", "我想進去...", "打不開..."];

        function next(e) {
            e.stopPropagation();
            if (!active) { location.reload(); return; }

            count++;
            if (count < 3) {
                // 按鈕縮小一點點，增加「捕捉」的感覺
                e.target.innerText = (stage === 1 ? "捕捉意識 " : "轉動把手 ") + `(${count}/3)`;
                e.target.style.left = (Math.random() * 60 + 15) + '%';
                e.target.style.top = (Math.random() * 60 + 15) + '%';
                
                // 點擊干擾：背景晃動
                document.getElementById('bg').style.transform = "scale(1.05)";
                setTimeout(() => { if(active) document.getElementById('bg').style.transform = "scale(0.9)"; }, 150);
            } else if (stage === 1) {
                stage = 2; count = 0;
                document.getElementById('bg').style.backgroundImage = "url('433455.jpg')";
                document.getElementById('status').innerText = "抵達門口，但...";
                e.target.innerText = "怎麼打不開？ (0/3)";
                e.target.style.borderColor = "#ff4d4d"; // 第二關按鈕邊框變紅，增加急迫感
            } else {
                finish();
            }
        }

        function finish() {
            active = false;
            const b = document.getElementById('btn');
            b.style.opacity = "0";
            b.style.pointerEvents = "none";
            document.getElementById('status').innerText = "門開了...";
            
            const bg = document.getElementById('bg');
            bg.style.filter = "none";
            bg.style.transform = "scale(1)";
            document.getElementById('vignette').style.opacity = "0";
            document.getElementById('joy-base').style.opacity = "0";

            setTimeout(() => {
                document.getElementById('status').innerText = "這是我家。";
                setTimeout(() => {
                    document.getElementById('status').innerText = "趁還記得，再多看一眼。";
                    bg.style.transition = "filter 15s ease-in, opacity 12s ease-in";
                    bg.style.filter = "grayscale(1) blur(10px)";
                    bg.style.opacity = "0.2";
                    
                    setTimeout(() => {
                        b.style.opacity = "1";
                        b.style.pointerEvents = "auto";
                        b.style.left = "50%"; b.style.top = "85%"; b.style.transform = "translateX(-50%)";
                        b.style.background = "rgba(255,255,255,0.1)";
                        b.style.borderColor = "rgba(255,255,255,0.3)";
                        b.innerText = "重啟模擬";
                        document.getElementById('status').innerText = "記憶已流逝。";
                    }, 5000);
                }, 4000);
            }, 2000);
        }

        window.addEventListener('touchstart', (e) => {
            if (!active || e.target.id === 'btn') return;
            const div = document.createElement('div');
            div.className = 'whisper';
            div.style.left = e.touches[0].clientX + 'px';
            div.style.top = e.touches[0].clientY + 'px';
            const list = (stage === 1) ? texts1 : texts2;
            div.innerText = list[Math.floor(Math.random()*list.length)];
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 2500);
        });

        // 搖桿邏輯
        const base




